(()=>{var e={642:e=>{e.exports=()=>{const e=e=>{let t;for(let r=0;r<10;r++)for(let a=0;a<10;a++)t=document.createElement("div"),t.classList.add("square"),t.classList.add("empty"),t.setAttribute("data-row",r),t.setAttribute("data-column",a),e.appendChild(t)},t=(e,t)=>document.querySelector(`.${t}[data-row="${e[0]}"][data-column="${e[1]}"]`);return{renderPlaceShipsView:()=>{const t=document.querySelector("#content");t.innerHTML="";const r=document.createElement("h2");r.textContent="Place your ships",t.appendChild(r);const a=document.createElement("div");a.id="ship-type-container",t.appendChild(a);const n=document.createElement("h3");n.id="ship-type",a.appendChild(n);const o=document.createElement("div");o.classList.add("place-ships-container"),t.appendChild(o);const d=document.createElement("div");d.classList.add("board"),e(d),o.appendChild(d);const l=document.createElement("button");l.id="rotate-ship-button",o.appendChild(l);const c=document.createElement("span");c.classList.add("material-symbols-outlined"),c.textContent="rotate_right",l.appendChild(c)},renderPlaceShipsBoard:e,displayShipType:e=>{document.querySelector("#ship-type").textContent=e},renderShipToBePlaced:(e,t,r)=>{let a;for(let n=0;n<e.length;n++)a=r?document.querySelector(`[data-row="${t[0]}"][data-column="${t[1]+n}"]`):document.querySelector(`[data-row="${t[0]+n}"][data-column="${t[1]}"]`),a.style.backgroundColor="#e5dace59"},clearShipToBePlaced:(e,t,r)=>{let a;for(let n=0;n<e.length;n++)a=r?document.querySelector(`[data-row="${t[0]}"][data-column="${t[1]+n}"]`):document.querySelector(`[data-row="${t[0]+n}"][data-column="${t[1]}"]`),a.style.backgroundColor="empty"==a.classList[1]?"#1e1c32":"#e5dace"},renderShip:(e,t,r)=>{let a;for(let n=0;n<e.length;n++)a=r?document.querySelector(`[data-row="${t[0]}"][data-column="${t[1]+n}"]`):document.querySelector(`[data-row="${t[0]+n}"][data-column="${t[1]}"]`),a.classList.add("hasShip"),a.style.backgroundColor="#e5dace",a.style.border="0.5px solid #1e1c32"},renderPlayButton:()=>{const e=document.querySelector("#ship-type-container"),t=document.createElement("button");t.id="play-button",t.textContent="Play!",e.appendChild(t)},renderGameView:()=>{const e=document.querySelector("#content");e.innerHTML="";const t=document.createElement("div");t.id="boards-container",e.appendChild(t);const r=document.createElement("div");r.id="player-container",t.append(r);const a=document.createElement("h3");a.textContent="You",a.classList.add("current-player-turn"),r.appendChild(a);const n=document.createElement("div");n.classList.add("board"),n.classList.add("player"),r.appendChild(n);const o=document.createElement("div");o.id="enemy-container",t.append(o);const d=document.createElement("h3");d.textContent="Computer",o.appendChild(d);const l=document.createElement("div");l.classList.add("board"),l.classList.add("enemy"),o.appendChild(l);const c=document.createElement("div");c.id="current-player-turn",c.textContent="Make your move",e.appendChild(c)},displayCurrentPlayerTurn:e=>{document.querySelector("#current-player-turn").textContent="player"==e?"Make your move":"Computer is making its move..."},renderGameboard:(e,t,r)=>{let a;for(let n=0;n<10;n++)for(let o=0;o<10;o++)a=document.createElement("div"),a.classList.add("square"),a.setAttribute("data-row",n),a.setAttribute("data-column",o),r?(a.classList.add("player"),"object"==typeof e.getSquare(n,o)[0]&&(a.style.backgroundColor="#e5dace",a.style.border="0.5px solid #1e1c32")):r||a.classList.add("enemy"),t.appendChild(a)},renderMoveToMake:(e,r)=>{t(e,r).style.backgroundColor="#e5dace59"},clearMoveToMake:(e,r)=>{t(e,r).style.backgroundColor="#1e1c32"},renderMove:(e,r,a)=>{let n=t(e,a);switch(r){case"hit":n.classList.add("hit"),n.style.color="#1e1c32",n.style.backgroundColor="#e5dace",n.style.border="0.5px solid #1e1c32",n.textContent="X";break;case"sunk":n.style.color="#e5dace",n.style.backgroundColor="#e5dace59",n.style.border="0.5px solid #e5dace",n.classList.add("sunk"),n.textContent="X";break;case"miss":n.style.color="#e5dace",n.style.backgroundColor="#1e1c32",n.style.border="0.5px solid #e5dace",n.textContent="*"}},displayGameOver:e=>{const t=document.querySelector("#current-player-turn");t.textContent="";const r=document.createElement("div");r.id="game-over-text",r.textContent=e,t.appendChild(r)},renderPlayAgainButton:()=>{const e=document.querySelector("#current-player-turn"),t=document.createElement("button");t.id="play-again-button",t.textContent="Play again",e.appendChild(t)}}}},417:(e,t,r)=>{const a=r(507),n=r(643),o=r(642);e.exports=()=>{let e,t,r,d,l,c,s,u=[n("Carrier",5),n("Battleship",4),n("Destroyer",3),n("Submarine",3),n("Patrol Boat",2)],i=[n("Carrier",5),n("Battleship",4),n("Destroyer",3),n("Submarine",3),n("Patrol Boat",2)];const m=()=>{l=1!=l},p=e=>[parseInt(e.getAttribute("data-row")),parseInt(e.getAttribute("data-column"))],y=()=>{e=o(),t=a(),r=a(),d="player",l=!0,c=0,s=!1,h()},h=()=>{e.renderPlaceShipsView(),e.displayShipType(u[c].type),m(),g(),b()},g=()=>{document.querySelector("#rotate-ship-button").addEventListener("click",m)},b=()=>{let r=document.querySelectorAll(".square");for(let a=0;a<r.length;a++)r[a].addEventListener("mouseover",(r=>{let a=p(r.currentTarget);!s&&k(a,u[c],l,t.gameboard)&&e.renderShipToBePlaced(u[c],a,l)})),r[a].addEventListener("mouseout",(r=>{let a=p(r.currentTarget);!s&&k(a,u[c],l,t.gameboard)&&e.clearShipToBePlaced(u[c],a,l)})),r[a].addEventListener("click",(r=>{let a=p(r.currentTarget);if(!s&&k(a,u[c],l,t.gameboard)){if(q(u[c],l,a,t.gameboard),e.renderShip(u[c],a,l),c==u.length-1)return document.querySelector("#ship-type-container").innerHTML="",s=!0,e.renderPlayButton(),void S();c++,e.displayShipType(u[c].type)}}))},S=()=>{document.querySelector("#play-button").addEventListener("click",(a=>(C(r.gameboard),e.renderGameView(),e.displayCurrentPlayerTurn(d),e.renderGameboard(t.gameboard,document.querySelector(".board.player"),!0),e.renderGameboard(r.gameboard,document.querySelector(".board.enemy"),!1),void f())))},f=()=>{let t=document.querySelectorAll(".square.enemy");for(let a=0;a<t.length;a++)t[a].addEventListener("mouseover",(t=>{let a=p(t.currentTarget);E(a,r.gameboard)&&e.renderMoveToMake(a,"enemy")})),t[a].addEventListener("mouseout",(t=>{let a=p(t.currentTarget);E(a,r.gameboard)&&e.clearMoveToMake(a,"enemy")})),t[a].addEventListener("click",(e=>{let t=p(e.currentTarget);E(t,r.gameboard)&&M(t)}))},v=()=>{document.querySelector("#play-again-button").addEventListener("click",(e=>y()))},C=e=>{let t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())],r=1==Math.floor(2*Math.random());for(let a=0;a<i.length;a++){for(;!k(t,i[a],r,e);)t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())],r=1==Math.floor(2*Math.random());q(i[a],r,t,e)}},k=(e,t,r,a)=>{if(r&&e[1]+t.length-1>9)return!1;if(!r&&e[0]+t.length-1>9)return!1;for(let n=0;n<t.length;n++)if(r){if("empty"!=a.getSquare(e[0],e[1]+n)[0])return!1}else if("empty"!=a.getSquare(e[0]+n,e[1])[0])return!1;return!0},q=(e,t,r,a)=>{let n=[];for(let a=0;a<e.length;a++)t?n.push([r[0],r[1]+a]):n.push([r[0]+a,r[1]]);a.placeShip(e,n)},M=(a=null)=>{if("player"==d){if(t.attack(r.gameboard,a),e.renderMove(a,L(a,r.gameboard),"enemy"),x(r.gameboard,"enemy"),d="computer",e.displayCurrentPlayerTurn(d),w())return;a=r.automatedAttack(t.gameboard),setTimeout((function(){d="player",e.displayCurrentPlayerTurn(d),e.renderMove(a,L(a,t.gameboard),"player"),x(t.gameboard,"player"),w()}),2e3)}},E=(e,t)=>{if("computer"==d)return!1;let r=t.getSquare(e[0],e[1]);return!("miss"==r[1]|"sunk"==r[1]|"hit"==r[1])},L=(e,t)=>{let r=t.getSquare(e[0],e[1]);if("object"==typeof r[0])return"hit";switch(r[1]){case"":case"miss":return"miss";case"hit":return"hit";case"sunk":return"sunk"}},x=(e,t)=>{let r="player"==t?u:i;for(let a=0;a<r.length;a++)T(r[a],e)&&P(r[a],e,t)},T=(e,t)=>{for(let r=0;r<10;r++)for(let a=0;a<10;a++)if(t.getSquare(r,a)[0]==e&&"sunk"==t.getSquare(r,a)[1])return!0;return!1},P=(t,r,a)=>{for(let n=0;n<10;n++)for(let o=0;o<10;o++)r.getSquare(n,o)[0]==t&&e.renderMove([n,o],"sunk",a)},w=()=>t.gameboard.allShipsSunk()?(e.displayGameOver("You lost"),e.renderPlayAgainButton(),v(),!0):!!r.gameboard.allShipsSunk()&&(e.displayGameOver("You won!"),e.renderPlayAgainButton(),v(),!0);return{start:y}}},498:e=>{e.exports=()=>{let e=[],t=0,r=0;for(let t=0;t<10;t++){e[t]=[];for(let r=0;r<10;r++)e[t][r]=["empty",""]}const a=(t,r)=>e[t][r];return{get missedAttacks(){return missedAttacks},get board(){return e},getSquare:a,placeShip:(r,a)=>{for(let t=0;t<a.length;t++)coordinates=a[t],e[coordinates[0]][coordinates[1]][0]=r;t++},receiveAttack:t=>{"object"==typeof a(t[0],t[1])[0]?(e[t[0]][t[1]][0].hit(),e[t[0]][t[1]][1]="hit",e[t[0]][t[1]][0].isSunk()&&(r++,e[t[0]][t[1]][1]="sunk")):e[t[0]][t[1]][1]="miss"},allShipsSunk:()=>r==t}}},507:(e,t,r)=>{const a=r(498);e.exports=()=>{const e=a();return{get gameboard(){return e},attack:(e,t)=>{e.receiveAttack(t)},automatedAttack:e=>{let t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())],r=e.getSquare(t[0],t[1]);for(;"miss"==r[1]|"sunk"==r[1]|"hit"==r[1];)t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())],r=e.getSquare(t[0],t[1]);return e.receiveAttack(t),t}}}},643:e=>{e.exports=(e,t)=>{let r=0;return{get hitCount(){return r},get type(){return e},get length(){return t},hit:()=>{r++},isSunk:()=>t==r}}}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(642),r(643);const e=r(417);document.querySelector("#start-button").addEventListener("click",(t=>{e().start()}))})()})();